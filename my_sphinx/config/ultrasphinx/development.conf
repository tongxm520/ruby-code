
# Auto-generated at Thu Jan 15 16:38:20 +0800 2015.
# Hand modifications will be overwritten.
# /home/simon/code/ruby-code/my_sphinx/config/ultrasphinx/default.base
indexer {
  mem_limit = 256M
}

searchd {
  query_log = /usr/local/coreseek/var/log/query.log
  port = 3313
  seamless_rotate = 1
  max_matches = 100000
  read_timeout = 5
  pid_file = /usr/local/coreseek/var/log/searchd.pid
  address = 0.0.0.0
  max_children = 300
  log = /usr/local/coreseek/var/log/searchd.log
}

# Source configuration

source courses_main
{
  sql_range_step = 5000
  sql_ranged_throttle = 0
  sql_query_post = 

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = myseek_dev
sql_host = 127.0.0.1
sql_pass = 123456
sql_user = root
sql_query_range = SELECT MIN(id) , MAX(id) FROM courses 
sql_query = SELECT (courses.id * 2 + 0) AS id, '' AS body, 'Course' AS class, 0 AS class_id, UNIX_TIMESTAMP(courses.created_at) AS created_at, courses.memo AS memo, courses.name AS name, CAST(CRC32(courses.name) AS unsigned) AS name_facet, '' AS title, 0 AS title_facet FROM courses WHERE courses.id >= $start AND courses.id <= $end GROUP BY courses.id

sql_attr_uint = class_id
sql_attr_timestamp = created_at
sql_attr_uint = name_facet
sql_attr_uint = title_facet
sql_query_info = SELECT * FROM courses WHERE courses.id = (($id - 0) / 2)
}


# Source configuration

source notes_main
{
  sql_range_step = 5000
  sql_ranged_throttle = 0
  sql_query_post = 

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = myseek_dev
sql_host = 127.0.0.1
sql_pass = 123456
sql_user = root
sql_query_range = SELECT MIN(id) , MAX(id) FROM notes 
sql_query = SELECT (notes.id * 2 + 1) AS id, notes.body AS body, 'Note' AS class, 1 AS class_id, UNIX_TIMESTAMP(notes.created_at) AS created_at, '' AS memo, '' AS name, 0 AS name_facet, notes.title AS title, CAST(CRC32(notes.title) AS unsigned) AS title_facet FROM notes WHERE notes.id >= $start AND notes.id <= $end GROUP BY notes.id

sql_attr_uint = class_id
sql_attr_timestamp = created_at
sql_attr_uint = name_facet
sql_attr_uint = title_facet
sql_query_info = SELECT * FROM notes WHERE notes.id = (($id - 1) / 2)
}


# Index configuration

index main
{
  source = courses_main
  source = notes_main
  path = /usr/local/coreseek/var/sphinx_index_main
  morphology = stem_en
  html_strip = 0
  charset_table = 0..9, A..Z->a..z, -, _, ., &, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F,U+C5->U+E5, U+E5, U+C4->U+E4, U+E4, U+D6->U+F6, U+F6, U+16B, U+0c1->a, U+0c4->a, U+0c9->e, U+0cd->i, U+0d3->o, U+0d4->o, U+0da->u, U+0dd->y, U+0e1->a, U+0e4->a, U+0e9->e, U+0ed->i, U+0f3->o, U+0f4->o, U+0fa->u, U+0fd->y, U+104->U+105, U+105, U+106->U+107, U+10c->c, U+10d->c, U+10e->d, U+10f->d, U+116->U+117, U+117, U+118->U+119, U+11a->e, U+11b->e, U+12E->U+12F, U+12F, U+139->l, U+13a->l, U+13d->l, U+13e->l, U+141->U+142, U+142, U+143->U+144, U+144,U+147->n, U+148->n, U+154->r, U+155->r, U+158->r, U+159->r, U+15A->U+15B, U+15B, U+160->s, U+160->U+161, U+161->s, U+164->t, U+165->t, U+16A->U+16B, U+16B, U+16e->u, U+16f->u, U+172->U+173, U+173, U+179->U+17A, U+17A, U+17B->U+17C, U+17C, U+17d->z, U+17e->z,
  stopwords = 
  html_index_attrs = 
  charset_type = utf-8
  ngram_len = 1
  docinfo = extern
  min_word_len = 1
  ngram_chars = U+4E00..U+9FBB, U+3400..U+4DB5, U+20000..U+2A6D6, U+FA0E, U+FA0F, U+FA11, U+FA13, U+FA14, U+FA1F, U+FA21, U+FA23, U+FA24, U+FA27, U+FA28, U+FA29, U+3105..U+312C, U+31A0..U+31B7, U+3041, U+3043, U+3045, U+3047, U+3049, U+304B, U+304D, U+304F, U+3051, U+3053, U+3055, U+3057, U+3059, U+305B, U+305D, U+305F, U+3061, U+3063, U+3066, U+3068, U+306A..U+306F, U+3072, U+3075, U+3078, U+307B, U+307E..U+3083, U+3085, U+3087, U+3089..U+308E, U+3090..U+3093, U+30A1, U+30A3, U+30A5, U+30A7, U+30A9, U+30AD, U+30AF, U+30B3, U+30B5, U+30BB, U+30BD, U+30BF, U+30C1, U+30C3, U+30C4, U+30C6, U+30CA, U+30CB, U+30CD, U+30CE, U+30DE, U+30DF, U+30E1, U+30E2, U+30E3, U+30E5, U+30E7, U+30EE, U+30F0..U+30F3, U+30F5, U+30F6, U+31F0, U+31F1, U+31F2, U+31F3, U+31F4, U+31F5, U+31F6, U+31F7, U+31F8, U+31F9, U+31FA, U+31FB, U+31FC, U+31FD, U+31FE, U+31FF, U+AC00..U+D7A3, U+1100..U+1159, U+1161..U+11A2, U+11A8..U+11F9, U+A000..U+A48C, U+A492..U+A4C6
}


# Source configuration

source courses_delta
{
  sql_range_step = 5000
  sql_ranged_throttle = 0
  sql_query_post = 

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = myseek_dev
sql_host = 127.0.0.1
sql_pass = 123456
sql_user = root
sql_query_range = SELECT MIN(id) , MAX(id) FROM courses WHERE courses.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND)
sql_query = SELECT (courses.id * 2 + 0) AS id, '' AS body, 'Course' AS class, 0 AS class_id, UNIX_TIMESTAMP(courses.created_at) AS created_at, courses.memo AS memo, courses.name AS name, CAST(CRC32(courses.name) AS unsigned) AS name_facet, '' AS title, 0 AS title_facet FROM courses WHERE courses.id >= $start AND courses.id <= $end AND courses.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND) GROUP BY courses.id

sql_attr_uint = class_id
sql_attr_timestamp = created_at
sql_attr_uint = name_facet
sql_attr_uint = title_facet
sql_query_info = SELECT * FROM courses WHERE courses.id = (($id - 0) / 2)
}


# Source configuration

source notes_delta
{
  sql_range_step = 5000
  sql_ranged_throttle = 0
  sql_query_post = 

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = myseek_dev
sql_host = 127.0.0.1
sql_pass = 123456
sql_user = root
sql_query_range = SELECT MIN(id) , MAX(id) FROM notes WHERE notes.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND)
sql_query = SELECT (notes.id * 2 + 1) AS id, notes.body AS body, 'Note' AS class, 1 AS class_id, UNIX_TIMESTAMP(notes.created_at) AS created_at, '' AS memo, '' AS name, 0 AS name_facet, notes.title AS title, CAST(CRC32(notes.title) AS unsigned) AS title_facet FROM notes WHERE notes.id >= $start AND notes.id <= $end AND notes.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND) GROUP BY notes.id

sql_attr_uint = class_id
sql_attr_timestamp = created_at
sql_attr_uint = name_facet
sql_attr_uint = title_facet
sql_query_info = SELECT * FROM notes WHERE notes.id = (($id - 1) / 2)
}


# Index configuration

index delta
{
  source = courses_delta
  source = notes_delta
  path = /usr/local/coreseek/var/sphinx_index_delta
  morphology = stem_en
  html_strip = 0
  charset_table = 0..9, A..Z->a..z, -, _, ., &, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F,U+C5->U+E5, U+E5, U+C4->U+E4, U+E4, U+D6->U+F6, U+F6, U+16B, U+0c1->a, U+0c4->a, U+0c9->e, U+0cd->i, U+0d3->o, U+0d4->o, U+0da->u, U+0dd->y, U+0e1->a, U+0e4->a, U+0e9->e, U+0ed->i, U+0f3->o, U+0f4->o, U+0fa->u, U+0fd->y, U+104->U+105, U+105, U+106->U+107, U+10c->c, U+10d->c, U+10e->d, U+10f->d, U+116->U+117, U+117, U+118->U+119, U+11a->e, U+11b->e, U+12E->U+12F, U+12F, U+139->l, U+13a->l, U+13d->l, U+13e->l, U+141->U+142, U+142, U+143->U+144, U+144,U+147->n, U+148->n, U+154->r, U+155->r, U+158->r, U+159->r, U+15A->U+15B, U+15B, U+160->s, U+160->U+161, U+161->s, U+164->t, U+165->t, U+16A->U+16B, U+16B, U+16e->u, U+16f->u, U+172->U+173, U+173, U+179->U+17A, U+17A, U+17B->U+17C, U+17C, U+17d->z, U+17e->z,
  stopwords = 
  html_index_attrs = 
  charset_type = utf-8
  ngram_len = 1
  docinfo = extern
  min_word_len = 1
  ngram_chars = U+4E00..U+9FBB, U+3400..U+4DB5, U+20000..U+2A6D6, U+FA0E, U+FA0F, U+FA11, U+FA13, U+FA14, U+FA1F, U+FA21, U+FA23, U+FA24, U+FA27, U+FA28, U+FA29, U+3105..U+312C, U+31A0..U+31B7, U+3041, U+3043, U+3045, U+3047, U+3049, U+304B, U+304D, U+304F, U+3051, U+3053, U+3055, U+3057, U+3059, U+305B, U+305D, U+305F, U+3061, U+3063, U+3066, U+3068, U+306A..U+306F, U+3072, U+3075, U+3078, U+307B, U+307E..U+3083, U+3085, U+3087, U+3089..U+308E, U+3090..U+3093, U+30A1, U+30A3, U+30A5, U+30A7, U+30A9, U+30AD, U+30AF, U+30B3, U+30B5, U+30BB, U+30BD, U+30BF, U+30C1, U+30C3, U+30C4, U+30C6, U+30CA, U+30CB, U+30CD, U+30CE, U+30DE, U+30DF, U+30E1, U+30E2, U+30E3, U+30E5, U+30E7, U+30EE, U+30F0..U+30F3, U+30F5, U+30F6, U+31F0, U+31F1, U+31F2, U+31F3, U+31F4, U+31F5, U+31F6, U+31F7, U+31F8, U+31F9, U+31FA, U+31FB, U+31FC, U+31FD, U+31FE, U+31FF, U+AC00..U+D7A3, U+1100..U+1159, U+1161..U+11A2, U+11A8..U+11F9, U+A000..U+A48C, U+A492..U+A4C6
}

